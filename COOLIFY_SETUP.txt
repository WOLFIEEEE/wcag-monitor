â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         WCAG MONITOR - COOLIFY DEPLOYMENT PACKAGE            â•‘
â•‘           Updated for Coolify v4+ (2025/2026)                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš¨ COMMON ISSUE: "Healthy but URL not working"

   This happens when Coolify routes to wrong service/port!
   
   FIX:
   1. In Coolify â†’ Your App â†’ Services tab
   2. Click "frontend" service
   3. Set port to: 3000
   4. Ensure domain is configured on frontend (not backend)
   5. Click "Restart" (not Deploy)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ REPOSITORY LOCATION
/Users/khushwantparihar/pally-setup/wcag-monitor

ğŸ“‹ WHAT'S INCLUDED

âœ… Core Application
  - Backend API (Hapi.js + Pa11y)
  - Frontend (Next.js 16)
  - All advanced features implemented

âœ… Docker Configuration
  - docker-compose.yaml (Coolify-optimized with labels)
  - docker-compose.yml (Local development)
  - docker/backend.Dockerfile (With Chrome for Pa11y)
  - docker/frontend.Dockerfile (Multi-stage, port 3000)

âœ… Configuration Files
  - .env.example (Complete environment template)
  - .gitignore (Clean repository)
  - .dockerignore (Optimized builds)

âœ… Documentation
  - README.md (Comprehensive guide)
  - DEPLOYMENT.md (Coolify v4+ step-by-step)
  - This file (Quick start)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ QUICK START (5 STEPS)

1ï¸âƒ£  PUSH TO GIT
cd /Users/khushwantparihar/pally-setup/wcag-monitor
git add .
git commit -m "Fix: Coolify configuration"
git push origin main

2ï¸âƒ£  CREATE IN COOLIFY
- Open Coolify Dashboard
- Click "+ Create" â†’ "Docker Compose"
- Select your repository
- Choose branch: main

3ï¸âƒ£  CONFIGURE FRONTEND SERVICE
âš ï¸  THIS IS CRITICAL - Most issues come from skipping this!

   a) Go to "Services" tab after creation
   b) Click on "frontend" service
   c) Set Port: 3000
   d) Add your domain
   e) Enable SSL

4ï¸âƒ£  SET ENVIRONMENT VARIABLES
Generate secrets:
  openssl rand -base64 32  # For JWT_SECRET
  openssl rand -base64 32  # For JWT_REFRESH_SECRET

Add in Coolify:
  JWT_SECRET=<generated-1>
  JWT_REFRESH_SECRET=<generated-2>
  FRONTEND_URL=https://your-domain.com
  NEXT_PUBLIC_API_URL=https://your-domain.com

5ï¸âƒ£  DEPLOY
- Click "Deploy" button
- Wait 3-5 minutes for all services
- Visit your domain!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ ARCHITECTURE

Internet â†’ Coolify Traefik (SSL) â†’ Frontend:3000
                                       â†“
                                 Backend:3000 â†’ MongoDB:27017

All internal communication via Docker network.
Frontend exposed to internet via Traefik reverse proxy.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¦ SERVICES

1. MongoDB (Internal Only)
   - Port: 27017
   - Persistent volumes
   - Health checked

2. Backend (Internal Only)
   - Port: 3000
   - Pa11y scanner with Chrome
   - JWT authentication
   - Health endpoint: /health

3. Frontend (Public via Traefik)
   - Port: 3000 (Coolify routes here)
   - Next.js standalone
   - SSR optimized
   - Proxies /health, /auth/*, /tasks/*, /billing/* to backend

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”’ REQUIRED ENVIRONMENT VARIABLES

JWT_SECRET              - For signing JWT tokens
JWT_REFRESH_SECRET      - For refresh tokens  
FRONTEND_URL            - Your public domain
NEXT_PUBLIC_API_URL     - API URL for browser

ğŸ”§ OPTIONAL ENVIRONMENT VARIABLES

STRIPE_SECRET_KEY       - For billing features
STRIPE_WEBHOOK_SECRET   - Stripe webhooks
FREE_URL_LIMIT          - Default: 2
CRON                    - Default: 0 30 0 * * *
NUM_WORKERS             - Default: 2

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ› ï¸ TROUBLESHOOTING

"Healthy" but can't access URL:
  â†’ Check Services tab â†’ frontend â†’ port = 3000
  â†’ Check domain is on frontend service
  â†’ Click "Restart" not "Deploy"

502 Bad Gateway:
  â†’ Wait 3-5 minutes for all services to start
  â†’ Check backend logs in Coolify

Build Fails:
  â†’ Check environment variables are set
  â†’ Ensure 4GB+ RAM on server

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š DOCUMENTATION

- README.md        - Complete guide
- DEPLOYMENT.md    - Coolify v4+ step-by-step
- .env.example     - All configuration options

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ›Ÿ SUPPORT

Health Check:  curl https://your-domain.com/health
Coolify Docs:  https://coolify.io/docs
Coolify Help:  https://coollabs.io/discord

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… ALL DONE! Ready for Coolify deployment.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
