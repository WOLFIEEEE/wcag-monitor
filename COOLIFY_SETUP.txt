â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    WCAG MONITOR - COOLIFY DEPLOYMENT (BACKEND ONLY)          â•‘
â•‘           Updated for Coolify v4+ (2025/2026)                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ ARCHITECTURE OVERVIEW

   Frontend: Hosted on Vercel (see VERCEL_SETUP.md)
   Backend:  Hosted on Coolify (this guide)
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Vercel: https://yourdomain.com         â”‚
   â”‚  (Next.js Frontend)                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ HTTPS API calls
                    â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Coolify: https://api.yourdomain.com    â”‚
   â”‚  Backend API + MongoDB                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ REPOSITORY LOCATION
/Users/khushwantparihar/pally-setup/wcag-monitor

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ QUICK START (5 STEPS)

1ï¸âƒ£  PUSH TO GIT
cd /Users/khushwantparihar/pally-setup/wcag-monitor
git add .
git commit -m "Split architecture: Vercel frontend + Coolify backend"
git push origin main

2ï¸âƒ£  CREATE IN COOLIFY
- Open Coolify Dashboard
- Click "+ Create" â†’ "Docker Compose"
- Select your repository
- Choose branch: main

3ï¸âƒ£  CONFIGURE BACKEND SERVICE
   a) Go to "Services" tab after creation
   b) Click on "backend" service
   c) Set Port: 3000
   d) Add your API domain (e.g., api.yourdomain.com)
   e) Enable SSL

4ï¸âƒ£  SET ENVIRONMENT VARIABLES
Generate secrets:
  openssl rand -base64 32  # For JWT_SECRET
  openssl rand -base64 32  # For JWT_REFRESH_SECRET

Add in Coolify:
  JWT_SECRET=<generated-1>
  JWT_REFRESH_SECRET=<generated-2>
  FRONTEND_URL=https://yourdomain.com
  ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

5ï¸âƒ£  DEPLOY
- Click "Deploy" button
- Wait 2-3 minutes for services
- Test: curl https://api.yourdomain.com/health

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¦ SERVICES (Backend Only)

1. MongoDB (Internal Only)
   - Port: 27017
   - Persistent volumes
   - Health checked

2. Backend API (Public via Traefik)
   - Port: 3000
   - Pa11y scanner with Chrome
   - JWT authentication
   - CORS configured for Vercel frontend
   - Health endpoint: /health

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”’ REQUIRED ENVIRONMENT VARIABLES

JWT_SECRET              - For signing JWT tokens
JWT_REFRESH_SECRET      - For refresh tokens  
FRONTEND_URL            - Your Vercel frontend domain
ALLOWED_ORIGINS         - CORS allowed origins (comma-separated)

ğŸ”§ OPTIONAL ENVIRONMENT VARIABLES

STRIPE_SECRET_KEY       - For billing features
STRIPE_WEBHOOK_SECRET   - Stripe webhooks
FREE_URL_LIMIT          - Default: 2
CRON                    - Default: 0 30 0 * * *
NUM_WORKERS             - Default: 2

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ› ï¸ TROUBLESHOOTING

CORS Errors from Vercel:
  â†’ Check ALLOWED_ORIGINS includes your Vercel domain(s)
  â†’ Ensure no trailing slashes in ALLOWED_ORIGINS

502 Bad Gateway:
  â†’ Wait 2-3 minutes for all services to start
  â†’ Check backend logs in Coolify

Build Fails:
  â†’ Check environment variables are set
  â†’ Ensure 4GB+ RAM on server

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š DOCUMENTATION

- README.md         - Complete guide
- VERCEL_SETUP.md   - Frontend deployment on Vercel
- .env.example      - All configuration options

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ›Ÿ SUPPORT

Backend Health:  curl https://api.yourdomain.com/health
Coolify Docs:    https://coolify.io/docs
Coolify Help:    https://coollabs.io/discord

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… ALL DONE! Backend ready for Coolify deployment.
   Don't forget to deploy frontend on Vercel!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

